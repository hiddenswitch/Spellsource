<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (12.0.1) on Mon Dec 16 00:31:57 PST 2019 -->
<title>com.hiddenswitch.spellsource</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2019-12-16">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="com.hiddenswitch.spellsource";
        }
    }
    catch(err) {
    }
//-->
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<main role="main">
<div class="header">
<h1 title="Package" class="title">Package&nbsp;com.hiddenswitch.spellsource</h1>
</div>
<div class="contentContainer">
<section role="region"><a id="package.description">
<!--   -->
</a>
<div class="block"><b>The core multiplayer code for Spellsource.</b>
 <p>
 Spellsource uses Vertx as a REST and web socket framework, Hazelcast to share data between members of the serving
 cluster, Quasar to make async code behave synchronously with fibers, and MongoDB as its database persistence
 backend.
 <p>
 The convention is to implement as much server code as possible as a static method in an interface. Mark the method as
 <code>Suspendable</code> or make it <code>throw SuspendExecution</code> to ensure it works as a
 fiber. Then you can use methods like <a href="util/Mongo.html#findOne(java.lang.String,io.vertx.core.json.JsonObject,io.vertx.core.json.JsonObject)"><code>Mongo.findOne(java.lang.String,
 io.vertx.core.json.JsonObject, io.vertx.core.json.JsonObject)</code></a>, which appears synchronous but actually uses Quasar
 fibers to perform an async call with Netty (the high performance way of doing things).
 <p>
 To easily create JSON objects, use <a href="util/QuickJson.html#json(java.lang.Object...)"><code>QuickJson.json(java.lang.Object...)</code></a>. For
 example, to create the object:
 <pre>
   {
     "$set": {
       "test.field": "value"
     },
     "$inc": {
       "other.field": 2
     }
   }
 </pre>
 Use:
 <pre>
   <code>
     import static com.hiddenswitch.spellsource.util.QuickJson.*;

     JsonObject obj = json("$set", json("test.field", "value"), "$inc", json("other.field", 2));
   </code>
 </pre>
 Observe the <code>import static</code> line to make things as elegant as possible.
 <p>
 To turn async code into something that returns on its callback, use <code>Sync.awaitResult(java.util.function.Consumer)</code>.
 For example:
 <pre>
   <code>
     import static io.vertx.ext.sync.Sync.awaitResult;

     MailResult mailResult = awaitResult(h -&gt; mailClient.sendMail(new MailMessage(), h));
   </code>
 </pre>
 Observe that <code>"h"</code> is the callback for the async function <code>sendMail</code>.
 <p>
 Callbacks that should be executed as fibers can be wrapped with <a href="util/Sync.html#suspendableHandler(co.paralleluniverse.strands.SuspendableAction1)"><code>Sync.suspendableHandler(co.paralleluniverse.strands.SuspendableAction1)</code></a>.
 <p>
 To easily access the Spellsource database, use <a href="util/Mongo.html#mongo()"><code>Mongo.mongo()</code></a> in a fiber:
 <pre>
   <code>
     import static com.hiddenswitch.spellsource.util.Mongo.mongo;

     Record record = new Record();
     mongo().insert("collection", JsonObject.mapFrom(record));
     mongo().update("collection", json("_id", "12345"), json("$set", json("value", 1)));
   </code>
 </pre>
 Observe the use of <code>json(...)</code> and <code>mapFrom</code>.
 <p>
 To add a REST method, visit <a href="Gateway.html" title="interface in com.hiddenswitch.spellsource"><code>Gateway</code></a> and read the documentation there.
 <p>
 To add a method available to the web socket channel, visit <a href="Connection.html" title="interface in com.hiddenswitch.spellsource"><code>Connection</code></a> and read
 the documentation there.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Games.html" title="interface in com.hiddenswitch.spellsource"><code>for the service that creates games and converts internal game data into a
 		format compatible with the Unity3D client.</code></a></dd>
</dl>
</section>
<ul class="blockList">
<li class="blockList">
<div class="typeSummary">
<table>
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Accounts.html" title="interface in com.hiddenswitch.spellsource">Accounts</a></th>
<td class="colLast">
<div class="block">The accounts services.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Bots.html" title="interface in com.hiddenswitch.spellsource">Bots</a></th>
<td class="colLast">
<div class="block">A service that processes bot actions, mulligans and conveniently creates bot games.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Broadcaster.html" title="interface in com.hiddenswitch.spellsource">Broadcaster</a></th>
<td class="colLast">
<div class="block">A service that broadcasts, in a simple UDP protocol, the server host to connect to.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Cards.html" title="interface in com.hiddenswitch.spellsource">Cards</a></th>
<td class="colLast">
<div class="block">The cards service.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Cluster.html" title="interface in com.hiddenswitch.spellsource">Cluster</a></th>
<td class="colLast">
<div class="block">Manages the Atomix-based clustering and in-memory state management of Spellsource game servers</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Configuration.html" title="interface in com.hiddenswitch.spellsource">Configuration</a></th>
<td class="colLast">
<div class="block">Retrieves the server configuration from the environment.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Connection.html" title="interface in com.hiddenswitch.spellsource">Connection</a></th>
<td class="colLast">
<div class="block">Manages the real time data connection users get when they connect to the Spellsource server.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Connection.SetupHandler.html" title="interface in com.hiddenswitch.spellsource">Connection.SetupHandler</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Conversations.html" title="interface in com.hiddenswitch.spellsource">Conversations</a></th>
<td class="colLast">
<div class="block">Provides the methods to help users message each other.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Decks.html" title="interface in com.hiddenswitch.spellsource">Decks</a></th>
<td class="colLast">
<div class="block">The deck management service.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Draft.html" title="interface in com.hiddenswitch.spellsource">Draft</a></th>
<td class="colLast">
<div class="block">The drafts service.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Friends.html" title="interface in com.hiddenswitch.spellsource">Friends</a></th>
<td class="colLast">
<div class="block">Provides a way for users to friend each other.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Games.html" title="interface in com.hiddenswitch.spellsource">Games</a></th>
<td class="colLast">
<div class="block">A service that starts a game session, accepts connections from players and manages the state of the game.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Gateway.html" title="interface in com.hiddenswitch.spellsource">Gateway</a></th>
<td class="colLast">
<div class="block">A specification for the HTTP API that clients can access.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Inventory.html" title="interface in com.hiddenswitch.spellsource">Inventory</a></th>
<td class="colLast">
<div class="block">Provides methods to manage a player's persistent inventory.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Invites.html" title="interface in com.hiddenswitch.spellsource">Invites</a></th>
<td class="colLast">
<div class="block">This service allows players to invite each other to private games.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Logic.html" title="interface in com.hiddenswitch.spellsource">Logic</a></th>
<td class="colLast">
<div class="block">A Logic service that handles complex game logic.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Matchmaking.html" title="interface in com.hiddenswitch.spellsource">Matchmaking</a></th>
<td class="colLast">
<div class="block">The matchmaking service is the primary entry point into ranked games for clients.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Migrations.html" title="interface in com.hiddenswitch.spellsource">Migrations</a></th>
<td class="colLast">
<div class="block">The migrations service performs database migrations on Mongo, using a mongo document as a lock.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Presence.html" title="interface in com.hiddenswitch.spellsource">Presence</a></th>
<td class="colLast">
<div class="block">Provides presence information to players who are each other's friends.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Tracing.html" title="interface in com.hiddenswitch.spellsource">Tracing</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Version.html" title="interface in com.hiddenswitch.spellsource">Version</a></th>
<td class="colLast">
<div class="block">Allows the code to easily access version information.</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
<li class="blockList">
<div class="typeSummary">
<table>
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="BaseCardResources.html" title="class in com.hiddenswitch.spellsource">BaseCardResources</a></th>
<td class="colLast">
<div class="block">Represents card resources with some base cards that are useful for testing and ensuring there is always at least one
 champion / class, format and set available for the runtime.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="BaseCardsModule.html" title="class in com.hiddenswitch.spellsource">BaseCardsModule</a></th>
<td class="colLast">
<div class="block">The base cards module.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Generator.html" title="class in com.hiddenswitch.spellsource">Generator</a></th>
<td class="colLast">
<div class="block">Converts the card JSON into a table format used for various AI-based card generation algorithms.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Spellsource.html" title="class in com.hiddenswitch.spellsource">Spellsource</a></th>
<td class="colLast">
<div class="block">The Spellsource Server API.</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
