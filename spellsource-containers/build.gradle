plugins {
    id 'java-library'
    id 'idea'
    id 'com.bmuschko.docker-remote-api' version '7.3.0'
}

import com.bmuschko.gradle.docker.tasks.image.*

dependencies {
    api "org.testcontainers:testcontainers:$testcontainersVersion"
    api "org.testcontainers:toxiproxy:$testcontainersVersion"
    // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind
    implementation "com.fasterxml.jackson.core:jackson-databind:$jacksonDatabindVersion"
    implementation "com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:$jacksonDatabindVersion"
}

task createPythonImage(type: DockerBuildImage) {
    dependsOn += [tasks.processResources]
    inputDir.set(new File("$project.projectDir/src/main/resources/docker/pythonjava/"))
    quiet.set(true)
    images.set(["doctorpangloss/spellsource-pythonjava:latest"])
}

compileJava {
    options.warnings = false
}

java {
    sourceCompatibility(JavaVersion.VERSION_1_8)
}