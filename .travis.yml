language: java
sudo: false

jdk:
  - openjdk11
services:
  - mongodb

script:
  - travis_wait 5  ./gradlew cards:test
  - travis_wait 5  ./gradlew  game:test
  - travis_wait 15 ./gradlew   net:test -Dexclude-tests="**/SimultaneousGamesTest.class,**/ClusterTest.class"
  - travis_wait 10 ./gradlew   net:test --tests=com.hiddenswitch.spellsource.SimultaneousGamesTest.testSimultaneousGames
  - travis_wait 10 ./gradlew   net:test --tests=com.hiddenswitch.spellsource.ClusterTest

branches:
  only:
  - master

env:
  global:
    JAVA_OPTS=-Xmx1024m
    MONGO_URL=mongodb://127.0.0.1:27017/testdb
